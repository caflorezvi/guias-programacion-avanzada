<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/syntax.css' | relative_url }}">

    <!-- Estilos para centrar diagramas Mermaid -->
    <style>
        .mermaid {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2em 0;
        }

        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="container-lg px-3 my-5 markdown-body">
        {% if site.title and site.title != page.title %}
        <h1><a href="{{ "/" | absolute_url }}">{{ site.title }}</a></h1>
        {% endif %}

        {{ content }}

        {% if site.github.private != true and site.github.license %}
        <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
            Este sitio es de código abierto. {% github_edit_link "Mejora esta página" %}.
        </div>
        {% endif %}
    </div>

    <!-- Mermaid.js para diagramas -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        // Configurar Mermaid
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose'
        });

        // Convertir bloques de código con clase 'language-mermaid' a diagramas Mermaid
        document.addEventListener('DOMContentLoaded', function() {
            // Buscar todos los bloques de código con lenguaje mermaid
            const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');

            mermaidBlocks.forEach((block, index) => {
                // Crear un div con clase mermaid
                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = block.textContent;

                // Reemplazar el bloque de código con el div de mermaid
                block.parentElement.replaceWith(mermaidDiv);
            });

            // Inicializar Mermaid después de procesar los bloques
            mermaid.run();
        });
    </script>
</body>
</html>
